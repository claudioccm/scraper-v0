# Story 1.5: Basic Theme Preview Interface

## Status
Draft

## Story

**As a** developer validating the token system,
**I want** a simple interface that demonstrates theme switching across basic components,
**so that** I can validate the design token architecture works correctly and provides immediate visual feedback.

## Acceptance Criteria

1. **Component Preview Grid:** Interface displays button, card, and typography samples in a responsive grid
2. **Live Theme Switcher:** Dropdown or toggle interface allows real-time switching between available themes
3. **Token Inspector:** Debug panel shows current token values for transparency and troubleshooting
4. **Responsive Preview:** Interface works correctly across desktop, tablet, and mobile viewports
5. **Visual Validation:** Theme changes are immediately visible across all preview components without page refresh

## Tasks / Subtasks

- [ ] Create theme preview page/component structure (AC: 1, 4)
  - [ ] Create `/pages/theme-preview.vue` or `/components/ccmThemePreview.vue` file
  - [ ] Implement responsive grid layout using existing ccmMasterGrid system
  - [ ] Follow established component naming conventions (ccm prefix)
  - [ ] Integrate with existing CSS layer architecture (components layer)

- [ ] Build component preview grid display (AC: 1)
  - [ ] Display ccmButton component samples with various variants (primary, secondary, ghost, link)
  - [ ] Display ccmCard component samples with different content types
  - [ ] Display typography samples using semantic design tokens (heading-1, heading-2, body-text)
  - [ ] Organize samples in responsive grid with appropriate spacing tokens
  - [ ] Add labels and descriptions for each component variant

- [ ] Implement live theme switcher interface (AC: 2)
  - [ ] Create theme selector dropdown/toggle component
  - [ ] Integrate with theme switching infrastructure from Story 1.4
  - [ ] Use runtime CSS custom property updates (no page refresh)
  - [ ] Include default theme and any additional themes created
  - [ ] Provide clear visual feedback for active theme

- [ ] Create token inspector debug panel (AC: 3)
  - [ ] Display current values of semantic design tokens
  - [ ] Show primitive token values that semantic tokens reference
  - [ ] Include component-specific token values
  - [ ] Implement collapsible/expandable interface for token categories
  - [ ] Update token display in real-time when themes change

- [ ] Implement responsive behavior (AC: 4)
  - [ ] Test interface across breakpoints (321px, 769px, desktop)
  - [ ] Ensure grid adapts to smaller screens appropriately
  - [ ] Verify theme switcher remains accessible on mobile devices
  - [ ] Test token inspector readability across viewports
  - [ ] Validate component samples display correctly at all sizes

- [ ] Integrate real-time theme switching (AC: 5)
  - [ ] Connect theme switcher to CSS custom property system
  - [ ] Ensure immediate visual updates without page refresh
  - [ ] Test theme persistence using localStorage from Story 1.4
  - [ ] Verify all preview components update simultaneously
  - [ ] Implement loading states during theme transitions if needed

- [ ] Testing and validation (AC: 1-5)
  - [ ] Test component preview displays correctly
  - [ ] Validate theme switching functionality
  - [ ] Test token inspector accuracy
  - [ ] Verify responsive behavior across devices
  - [ ] Test accessibility with keyboard navigation
  - [ ] Validate integration with existing components

## Dev Notes

### Previous Story Context
[Source: Story 1.1 and 1.2 Implementation Context]

**Key Insights from Previous Stories:**
- **Primitive Token System:** Complete primitive token structure exists at `/public/css/tokens/primitives/` with HSL colors and Utopia spacing scales
- **CSS Layer Architecture:** Established layer hierarchy (reset → defaults → components → utils → overrides) must be maintained
- **Component Integration:** Existing ccmButton and ccmCard components are available for preview display
- **Import Chain:** Main `styles.css` already includes primitive token structure with proper layer assignment

### Frontend Architecture
[Source: docs/ui-architecture.md#frontend-tech-stack]

**Framework and Library Information:**
- **Framework:** Nuxt 3.16.2 with Vue 3.5.13 using Composition API
- **Routing:** File-based routing system with automatic route generation
- **State Management:** Pinia 3.0.2 for reactive state management
- **Styling:** CSS Layers + Custom Properties + PostCSS native CSS approach
- **Component Library:** Custom components with `ccm` prefix naming convention
- **Testing:** @nuxt/test-utils + Vitest for component testing environment

### Project Structure
[Source: docs/ui-architecture.md#project-structure]

**File Location Guidelines:**
- **Pages:** `/pages/theme-preview.vue` for standalone preview page
- **Components:** `/components/ccmThemePreview.vue` for reusable component
- **CSS Integration:** Leverage existing `/public/css/` layer architecture
- **Component Naming:** Follow `ccm` prefix convention established in codebase
- **Auto-imports:** Components auto-imported from `~/components` directory without path prefix

### CSS Architecture and Design Tokens
[Source: docs/ui-architecture.md#styling-guidelines]

**CSS Layer System:**
1. **reset** - CSS normalization and resets
2. **defaults** - Base typography, fonts, and CSS custom properties
3. **components** - Component-specific styles
4. **utils** - Utility classes for spacing, colors
5. **overrides** - Final overrides and exceptions

**Design Token Structure (from Stories 1.1-1.4):**
- **Primitive Tokens:** Raw HSL color values and Utopia spacing scales at `/public/css/tokens/primitives/`
- **Semantic Tokens:** Brand and system color mappings at `/public/css/tokens/semantic/`
- **Component Tokens:** Component-specific design tokens (from Story 1.3)
- **Theme System:** Runtime theme switching via CSS custom properties (from Story 1.4)

### Component Integration
[Source: Existing Component Analysis]

**Available Components for Preview:**
- **ccmButton:** Multiple variants (primary, secondary, ghost, link), sizes (s, m, l, xl), color options
- **ccmCard:** Content display component with BEM class structure
- **ccmMasterGrid:** 12-column CSS Grid responsive layout system
- **Typography System:** Integration with semantic typography tokens (heading-1, heading-2, body-text)

### Theme Switching Infrastructure
[Source: Story 1.4 Expected Implementation]

**Theme System Integration:**
- **Theme CSS Generation:** System generates theme-specific CSS files with semantic token overrides
- **Runtime Switching:** JavaScript utility enables switching themes by updating CSS custom properties
- **Theme Persistence:** Selected theme persists using localStorage
- **Theme Validation:** System validates theme completeness and warns about missing token definitions

### Responsive Design System
[Source: docs/ui-architecture.md#project-structure]

**Responsive Breakpoints:**
- **Mobile:** 321px breakpoint for small devices
- **Tablet:** 769px breakpoint for medium devices
- **Desktop:** Larger screen layouts with CSS Grid system
- **Grid System:** ccmMasterGrid provides responsive 12-column layout
- **Spacing:** Utopia spacing scales with clamp() functions for responsive behavior

### Component Standards
[Source: docs/ui-architecture.md#component-standards]

**Component Development Patterns:**
- **Vue 3 Composition API:** Use `<script setup lang="ts">` syntax
- **TypeScript Support:** Define proper interfaces and prop types
- **Dynamic Component Rendering:** Use `<component :is>` for flexible element types
- **CSS Custom Properties:** Leverage design token system for theming
- **Attribute Binding:** Support both `v-bind="$attrs"` for flexibility
- **Auto-imports:** Components auto-imported without explicit import statements

### Testing Requirements
[Source: docs/ui-architecture.md#testing-requirements]

**Testing Framework:**
- **Component Testing:** Vitest with @nuxt/test-utils for Nuxt-specific testing
- **Test Location:** `tests/components/` directory for component tests
- **Testing Configuration:** `vitest.config.ts` with Nuxt environment setup

**Testing Requirements for This Story:**
- **Theme Switching Validation:** Test theme selector functionality and CSS custom property updates
- **Component Display Testing:** Verify component samples render correctly in preview grid
- **Token Inspector Accuracy:** Validate token inspector shows correct current values
- **Responsive Testing:** Test interface behavior across breakpoints (321px, 769px, desktop)
- **Integration Testing:** Test integration with existing ccmButton, ccmCard, and ccmMasterGrid components
- **Accessibility Testing:** Test keyboard navigation and focus management
- **Visual Regression Testing:** Ensure theme changes apply correctly to all preview components

### Technical Constraints
[Source: docs/ui-architecture.md#architecture-decisions]

**CSS Layer Rules:**
- **Layer Assignment:** All styles must use proper CSS layer specification
- **No Scoped Styles:** Global CSS architecture, no scoped component styles allowed
- **CSS Custom Properties:** Use existing design token system, do not hardcode values
- **PostCSS Integration:** All CSS processed through PostCSS pipeline
- **Browser Compatibility:** Modern CSS features with automatic fallbacks

**Component Architecture Rules:**
- **No Direct Imports:** Leverage Nuxt's auto-import system for components
- **Composition API Only:** Use Vue 3 Composition API patterns
- **TypeScript Required:** All components must have proper TypeScript interfaces
- **Accessibility First:** WCAG 2.1 AA compliance required

### Project Structure Alignment
[Source: docs/ui-architecture.md#project-structure]

**File Organization:**
```
components/                 # Component location
├── ccmThemePreview.vue    # Main theme preview component
├── ccmButton.vue          # Existing button component (for preview)
├── ccmCard.vue            # Existing card component (for preview)
└── ccmMasterGrid.vue      # Existing grid component (for layout)

pages/                     # Page routing location
└── theme-preview.vue      # Standalone preview page

public/css/                # CSS architecture
├── tokens/               # Design token files
│   ├── primitives/      # Raw values (Story 1.1)
│   ├── semantic/        # Semantic layer (Story 1.2)
│   └── component/       # Component-specific tokens (Story 1.3)
└── components/           # Component styles location
```

**Integration Notes:**
- Theme preview component integrates with existing component library structure
- No conflicts identified between story requirements and existing architecture
- Follows established patterns from existing ccmButton and ccmCard implementations

## Testing

### Testing Standards
[Source: docs/ui-architecture.md#testing-approach]

**Test File Location:**
- Component tests: `tests/components/ccmThemePreview.test.ts`
- Integration tests: `tests/integration/theme-preview.test.ts`

**Testing Frameworks:**
- **Vitest:** Component testing with @nuxt/test-utils integration
- **Vue Test Utils:** Component isolation and interaction testing
- **Testing Configuration:** Use `vitest.config.ts` with Nuxt environment

**Testing Requirements for This Story:**
- **Component Rendering Tests:** Verify ccmButton, ccmCard, and typography samples display correctly
- **Theme Switching Tests:** Test theme selector functionality and immediate visual updates
- **Token Inspector Tests:** Validate token value display and real-time updates
- **Responsive Behavior Tests:** Test interface across breakpoints (321px, 769px, desktop)
- **Integration Tests:** Test integration with existing theme switching infrastructure
- **Accessibility Tests:** Test keyboard navigation, focus management, screen reader compatibility
- **Visual Validation Tests:** Test theme changes apply correctly to all preview components
- **Performance Tests:** Validate theme switching performance and memory usage

**No specific CSS testing framework guidance found in architecture docs** - will rely on component-level testing and manual verification of theme behavior.

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|---------|  
| 2025-09-04 | 1.0 | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

*This section will be populated by the development agent during implementation*

### Agent Model Used
*To be filled by dev agent*

### Debug Log References  
*To be filled by dev agent*

### Completion Notes List
*To be filled by dev agent*

### File List
*To be filled by dev agent*

## QA Results

*Results from QA Agent review will be populated here*